{% extends 'base.html.twig' %}


{% block body %}

{% set indicators = '' %}
{% set images = '' %}

{% for picture in maquette.urlImagePreview %}
    {% set activeClass = loop.first ? 'active' : '' %}
    {% set ariaCurrent = loop.first ? 'aria-current="true"' : '' %}
    {% set indicators = indicators ~ '  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="' ~ loop.index0 ~ '" class="' ~ activeClass ~ '" aria-current="true" '~ ariaCurrent ~'></button>' %}
    {% set images = images ~ '<div class="carousel-item ' ~ activeClass ~ '">' ~ picture ~ '</div>' %}
{% endfor %}

<section class="container-site pt-3 pb-5 bg-gradient-diagonal-secondary-color-light">

        <h1 class="mt-5 text-center mb-3 primary-color fw-bold">{{ maquette.title }}</h1>
        <div class="wrapper-description-carousel d-flex flex-xl-row flex-column ps-2 pe-2">
            <div id="carouselExampleIndicators" data-bs-ride="carousel" class="carousel slide col-xl-6 col-12">
            <div class="carousel-indicators">
                {{ indicators|raw }}
            </div>
            <div class="carousel-inner">
                {{ images|raw }}
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
            </div>
            <div class="col-xl-6 ps-2 pe-2 wrapper-description">
            {{ maquette.description|raw }}

               <a class="btn btn-blue mt-3" href="{{ path('app_contact_devis') }}" role="button">
                            Contactez-moi pour un projet de site 
                    {% if maquette.categoriesSite|length > 1 %}
                        {# Affiche la deuxième catégorie #}
                        {{ maquette.categoriesSite|slice(1,1)|first.type }}
                    {% else %}
                        {# Sinon affiche la première catégorie #}
                        {{ maquette.categoriesSite|first.type }}
                    {% endif %}
                </a> 

            </div>
        </div>

 
    <div class="d-flex justify-content-center mt-5">
        <a class="btn btn-grow" 
        href="{{ path('app_iframe_portfolio', { slugIframe: maquette.slug }) }}?url={{ maquette.url }}" 
        role="button" title="un site {{ category }} à Paris">Visiter le site {{ category }}</a>
     </div>
    
</section>





{% endblock %}